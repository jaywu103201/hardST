## 輸入文字 查詢 page30 (1) (PHP)
```
<?php
 $dept=str_replace("'","''",$_REQUEST['dept']);     
 
 $db_host = "localhost";
 $db_name = "test";
 $db_table = "ksu_std_table";
 $db_user = "root";
 $db_password = "";
 // check connection
 $conn = mysqli_connect($db_host, $db_user, $db_password);
 if(empty($conn)){
	print  mysqli_error ($conn);
    die ("Unable to connect to DB！" );
	exit;
 }  
 if(!mysqli_select_db( $conn, $db_name)){
	die("DB is not existed");
	exit;
 }  
 //main scope  
mysqli_set_charset($conn,'utf8');

echo "ksu_std_table : the number of students as follows"."<br/><br/>";
$result = mysqli_query($conn,
	"SELECT ksu_std_name,ksu_std_grade 
	FROM ksu_std_table 
	where ksu_std_department = '$dept'
	ORDER BY ksu_std_grade ");
     
 echo "<table border='1'>
 <tr>
   <th> Name </th>  <th>  Grade </th>   <th> memo </th> 
 </tr>";
$row_num = 0;
while($row = mysqli_fetch_array($result))
{
	echo "<tr>";
	echo "<td>". $row['ksu_std_name'] . "</td>";
	echo "<td>". $row['ksu_std_grade'] . "</td>";
	if ($row['ksu_std_grade']<60){
		echo "<td style=\"background-color:yellow\">". " make up " . "</td>";
	}
	else
	{
		echo "<td>" ."". "</td>";
	}
	echo "</tr>";
	$row_num= $row_num+1;
	
}
echo"</table>";
echo $row_num." records found ! " . "<br/><br/>";
?> 
<form enctype="multipart/form-data"  method = "post" action="ksu_select3.html">
<input type="submit" name="sub" value="Back"/>
</form>
```
```
 $dept=str_replace("'","''",$_REQUEST['dept']);     
```
```
	"SELECT ksu_std_name,ksu_std_grade 
	FROM ksu_std_table 
	where ksu_std_department = '$dept'
	ORDER BY ksu_std_grade ");
```
## 輸入文字 查詢 page30 (1) (HTML)
```
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Select exercise</title>
</head>
<body>
  <h3> ksu select operation </h3>
  <!--不對字符編碼 -->    
  <form enctype="multipart/form-data" method="post" action="ksu_select3.php" >
Querytment alias:<input type="text" value="CS" name="dept" size = "2"/> <br><br/>

<input type = "submit" name="sub" value="Query"/>
</form>
  </form>
</body>
</html>
```

```
Querytment alias:<input type="text" value="CS" name="dept" size = "2"/> <br><br/>

<input type = "submit" name="sub" value="Query"/>
```
## 輸入 系別+分數 查詢 page31 (php)
```
<?php
 $dept=str_replace("'","''",$_REQUEST['dept']);     
 $grade=str_replace("'","''",$_REQUEST['grade']);    
 
 $db_host = "localhost";
 $db_name = "test";
 $db_table = "ksu_std_table";
 $db_user = "root";
 $db_password = "";
 // check connection
 $conn = mysqli_connect($db_host, $db_user, $db_password);
 if(empty($conn)){
	print  mysqli_error ($conn);
    die ("Unable to connect to DB！" );
	exit;
 }  
 if(!mysqli_select_db( $conn, $db_name)){
	die("DB is not existed");
	exit;
 }  
 //main scope  
mysqli_set_charset($conn,'utf8');

echo "ksu_std_table : the number of students as follows"."<br/><br/>";
$result = mysqli_query($conn,
	"SELECT ksu_std_name,ksu_std_grade 
	FROM ksu_std_table 
	where ksu_std_department = '$dept' and ksu_std_grade = '$grade'
	ORDER BY ksu_std_grade ");
     
 echo "<table border='1'>
 <tr>
   <th> Name </th>  <th>  Grade </th>   <th> memo </th> 
 </tr>";
$row_num = 0;
while($row = mysqli_fetch_array($result))
{
	echo "<tr>";
	echo "<td>". $row['ksu_std_name'] . "</td>";
	echo "<td>". $row['ksu_std_grade'] . "</td>";
	if ($row['ksu_std_grade']<60){
		echo "<td style=\"background-color:yellow\">". " make up " . "</td>";
	}
	else
	{
		echo "<td>" ."". "</td>";
	}
	echo "</tr>";
	$row_num= $row_num+1;
	
}
echo"</table>";
echo $row_num." records found ! " . "<br/><br/>";
?> 
<form enctype="multipart/form-data"  method = "post" action="ksu_select3.html">
<input type="submit" name="sub" value="Back"/>
</form>
```
```
 $grade=str_replace("'","''",$_REQUEST['grade']);  
```
```
$result = mysqli_query($conn,
	"SELECT ksu_std_name,ksu_std_grade 
	FROM ksu_std_table 
	where ksu_std_department = '$dept' and ksu_std_grade = '$grade'
	ORDER BY ksu_std_grade ");
```
## 輸入 系別+分數 查詢 page31 (html)
```
<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Select exercise</title>
</head>
<body>
  <h3> ksu select operation </h3>
  <!--不對字符編碼 -->    
  <form enctype="multipart/form-data" method="post" action="ksu_select3.php" >
Querytment alias:<input type="text" value="CS" name="dept" size = "2"/> <br><br/>
Grade:<input type="text" value="100" name="grade" size = "3"/> <br><br/>
<input type = "submit" name="sub" value="Query"/>
</form>
  </form>
</body>
</html>
```
```
Grade:<input type="text" value="100" name="grade" size = "3"/> <br><br/>
```
## 查詢替換字串 page32 (php)
```
<?php
 $dept=str_replace("'","''",$_REQUEST['dept']); 

 
 $db_host = "localhost";
 $db_name = "test";
 $db_table = "ksu_std_table";
 $db_user = "root";
 $db_password = "";
 // check connection
 $conn = mysqli_connect($db_host, $db_user, $db_password);
 if(empty($conn)){
	print  mysqli_error ($conn);
    die ("Unable to connect to DB！" );
	exit;
 }  
 if(!mysqli_select_db( $conn, $db_name)){
	die("DB is not existed");
	exit;
 }  
 //main scope  
mysqli_set_charset($conn,'utf8');

echo "ksu_std_table : the number of students as follows"."<br/><br/>";
$result = mysqli_query($conn,
	"SELECT ksu_std_name,ksu_std_grade 
	FROM ksu_std_table 
	where (ksu_std_name like '%$dept')
	ORDER BY ksu_std_name ");
     
 echo "<table border='1'>
 <tr>
   <th> Original Name  </th> <th> updata Name  </th> <th>  Grade </th>   <th> memo </th> 
 </tr>";
$row_num = 0;
while($row = mysqli_fetch_array($result))
{
	echo "<tr>";
	echo "<td>". $row['ksu_std_name'] . "</td>";
	echo "<td>". str_replace($dept, 'Taiwan', $row['ksu_std_name']) . "</td>";
	echo "<td>". $row['ksu_std_grade'] . "</td>";
	
	if ($row['ksu_std_grade']<60){
		echo "<td style=\"background-color:yellow\">". " make up " . "</td>";
	}
	else
	{
		echo "<td>" ."". "</td>";
	}
	echo "</tr>";
	$row_num= $row_num+1;
	
}
echo"</table>";
echo $row_num." records found ! " . "<br/><br/>";
?> 
<form enctype="multipart/form-data"  method = "post" action="ksu_select3.html">
<input type="submit" name="sub" value="Back"/>
</form>
```
```
echo "<td>". str_replace($dept, 'Taiwan', $row['ksu_std_name']) . "</td>";
```
```
一樣用 str_replace可以用在ecoh
```
## PHP str_replace 函數語法
```
str_replace( search , replace , subject , count )
```
```
第一個參數 search 是要找的字符串，必填項目
第二個參數 replace 是要用來替換掉 search 的字符串，也是必填項目
第三個參數 subject 是原始字串或陣列，也是必填項目，
第四個參數 count  統計更換數量的新參數
```
